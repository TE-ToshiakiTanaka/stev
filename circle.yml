machine:
    python:
        version: '2.7.9'
    timezone: Asia/Tokyo
    environment:
        #TOX_PY26: '2.6.6'
        TOX_PY27: '2.7.10'
        #TOX_PY33: '3.3.3'
        #TOX_PY34: '3.4.3'

dependencies:
    pre:
        - pip -V
        - pip install -U pip
        - pip install -U ipdb
        - pip install -U tox
        - pip install wheel
        - pip install -U -r requirements.txt
        - pyenv local $TOX_PY27 #$TOX_PY34 $TOX_PY33 $TOX_PY27 $TOX_PY26

test:
    override:
        - tox -v --recreate
        - nosetests -v --with-xunit --with-coverage --cover-branches --cover-html test\*
        - python setup.py bdist_wheel
    post:
        - mkdir -p $CIRCLE_TEST_REPORTS/nose/
        - mv nosetests.xml $CIRCLE_TEST_REPORTS/nose/
        - mv dist $CIRCLE_ARTIFACTS
        - mv cover $CIRCLE_ARTIFACTS
