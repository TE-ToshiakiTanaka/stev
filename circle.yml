machine:
    java:
        version: openjdk7
    python:
        version: '2.7.10'
    timezone: Asia/Tokyo
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
        TOX_PY27: '2.7.10'

dependencies:
    pre:
        - ./opencv_install.sh
        - pip -V
        - pip install -U ipdb
        - pip install -U -r requirements.txt
        - pyenv local $TOX_PY27

    override:
        - echo y | android update sdk --no-ui --filter "android-21,build-tools-21.1.2"


test:
    override:
        - tox -v
    post:
        - mkdir -p $CIRCLE_TEST_REPORTS/nose/
        - mv nosetests.xml $CIRCLE_TEST_REPORTS/nose/
        - mv dist $CIRCLE_ARTIFACTS
        - mv cover $CIRCLE_ARTIFACTS
